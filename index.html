<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>XCAOX Maps</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="src/css/styles.css"/>
</head>
<body>
  <div id="map"></div>
  
  <!-- Debug Toggle Button -->
  <div id="debug-toggle" style="position: fixed; top: 10px; left: 10px; z-index: 1001; background: rgba(0,0,0,0.8); color: white; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; user-select: none;">
    üêõ Debug
  </div>
  
  <div id="debug" style="position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; max-width: 300px; font-size: 12px; z-index: 1000; display: none;">
    <div id="debug-content"></div>
  </div>
  
  <script>
    // Error logging to page
    window.onerror = function(msg, url, line, col, error) {
      const debugDiv = document.getElementById('debug');
      const debugContent = document.getElementById('debug-content');
      debugDiv.style.display = 'block';
      debugContent.innerHTML += '<div style="color: red;">ERROR: ' + msg + ' at line ' + line + '</div>';
      console.error('Global error:', msg, url, line, col, error);
      return false;
    };
    
    // Override console.log to also show on page
    const originalLog = console.log;
    console.log = function(...args) {
      originalLog.apply(console, args);
      const debugDiv = document.getElementById('debug');
      const debugContent = document.getElementById('debug-content');
      // Only show debug info if debug window is already visible
      if (debugDiv.style.display === 'block') {
      debugContent.innerHTML += '<div>' + args.join(' ') + '</div>';
      // Keep only last 10 messages
      const messages = debugContent.querySelectorAll('div');
      if (messages.length > 10) {
        messages[0].remove();
      }
      }
    };
    
    // Debug toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const debugToggle = document.getElementById('debug-toggle');
      const debugDiv = document.getElementById('debug');
      let debugVisible = false;
      
      debugToggle.addEventListener('click', function() {
        debugVisible = !debugVisible;
        if (debugVisible) {
          debugDiv.style.display = 'block';
          debugToggle.style.backgroundColor = 'rgba(0,128,0,0.8)';
          debugToggle.textContent = 'üêõ Debug (ON)';
        } else {
          debugDiv.style.display = 'none';
          debugToggle.style.backgroundColor = 'rgba(0,0,0,0.8)';
          debugToggle.textContent = 'üêõ Debug';
        }
      });
    });
  </script>
  
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="src/js/data-service.js"></script>
  <script src="src/js/poi-manager.js"></script>
  <script src="src/js/map-utils.js"></script>
  <script src="src/js/location-control.js"></script>
  <script src="src/js/tile-layer-manager.js"></script>
  <script src="src/js/app.js"></script>
</body>
</html>
</body>
</html>